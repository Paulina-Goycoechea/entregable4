<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Mi Playlist</title>
    <style>
        body { font-family: Arial; background: #111; color: #eee; margin: 0; padding: 20px; }
        h1 { color: #9b5cf6; }
        form { margin-bottom: 20px; }
        input, button { padding: 8px; border-radius: 6px; border: none; }
        button { background-color: #9b5cf6; color: white; cursor: pointer; }
        .video-card { background: #1b1b1b; padding: 15px; margin-bottom: 10px; border-radius: 10px; }
        iframe { width: 100%; height: 315px; }
        .actions button { margin-right: 5px; }
    </style>
</head>
<body>

<h1>Mi Playlist üé¨</h1>

<form th:action="@{/add}" method="post">
    <input type="text" name="titulo" placeholder="T√≠tulo del video" required>
    <input type="url" name="url" placeholder="URL del video" required>
    <button type="submit">Agregar</button>
</form>

<div th:each="v : ${videos}" class="video-card">
    <h3 th:text="${v.titulo}">T√≠tulo</h3>

    <!-- Si es un link de YouTube, mostramos embed -->
    <iframe th:if="${#strings.contains(v.url, 'youtube')}"
            th:src="'https://www.youtube.com/embed/' + ${#strings.substring(v.url, v.url.indexOf('v=') + 2)}">
    </iframe>

    <p>
        Likes: <span th:text="${v.likes}">0</span> |
        Favorito: <span th:text="${v.favorito} ? 'S√≠' : 'No'">No</span>
    </p>

    <div class="actions">
        <form th:action="@{'/like/' + ${v.id}}" method="post">
            <button type="submit">üëç Like</button>
        </form>

        <form th:action="@{'/fav/' + ${v.id}}" method="post">
            <button type="submit">‚≠ê Fav</button>
        </form>

        <form th:action="@{'/delete/' + ${v.id}}" method="post">
            <button type="submit">üóë Borrar</button>
        </form>
    </div>
</div>

</body>
</html>
